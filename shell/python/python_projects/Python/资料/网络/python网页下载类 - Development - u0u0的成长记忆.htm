<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0053)http://blog.chinaunix.net/u/4774/showart_1170005.html -->
<HTML><HEAD><TITLE>python网页下载类 - Development - u0u0的成长记忆</TITLE>
<META http-equiv=Content-Type content="text/html; charset=gbk"><LINK 
href="python网页下载类 - Development - u0u0的成长记忆.files/index.css" 
rel=stylesheet></LINK><LINK title="ChinaUnix Blog RSS Feed" 
href="http://blog.chinaunix.net/u/rss.php?id=4774" type=application/rss+xml 
rel=alternate></LINK>
<META content="python网页下载类 - Development - u0u0的成长记忆" name=keywords>
<META content="中国最大的IT技术博客-ChinaUnix博客：python网页下载类 - Development - u0u0的成长记忆" 
name=description>
<META content="MSHTML 6.00.2900.2180" name=GENERATOR></HEAD>
<BODY style="BACKGROUND: #ffffff" leftMargin=0 topMargin=0 align="center" 
marginheight="0" marginwidth="0">
<TABLE style="BORDER-COLLAPSE: collapse; HEIGHT: 25px" height=25 cellSpacing=0 
cellPadding=0 width="100%" align=center 
background="python网页下载类 - Development - u0u0的成长记忆.files/tophem1.gif" border=0>
  <TBODY>
  <TR>
    <TD id=tool-bar noWrap align=left>&nbsp; <A 
      href="http://blog.chinaunix.net/" target=_blank>博客首页</A> <A 
      href="http://blog.chinaunix.net/register.php" target=_blank>注册</A> <A 
      href="http://bbs.chinaunix.net/forumdisplay.php?fid=51" 
      target=_blank>建议与交流</A> <A href="http://blog.chinaunix.net/top/" 
      target=_blank>排行榜</A> <A 
      onclick="NewWindows('http://www.cublog.cn/addlink.php?url='+location.href+'&amp;title='+document.title);return false;" 
      href="http://blog.chinaunix.net/u/4774/" target=_blank>加入友情链接</A> </TD>
    <FORM id=loginForm action=/search.php method=get target=_blank>
    <TD noWrap align=right><IMG id=starimg height=12 alt="" 
      src="python网页下载类 - Development - u0u0的成长记忆.files/star6.gif" width=55 
      border=0> <A id=star title=给此博客推荐值 
      onclick="NewWindows(this.href);return false;" 
      href="http://blog.chinaunix.net/u2/star.php?blogid=4774">推荐</A> <A 
      id=complaint title=投诉此博客 onclick="NewWindows(this.href);return false;" 
      href="http://blog.chinaunix.net/u2/complaint.php?blogid=4774">投诉</A> 
      搜索：<INPUT name=q> <INPUT class=button1 type=submit value=搜索> <A 
      href="http://blog.chinaunix.net/help/">帮助</A></TD></FORM></TR></TBODY></TABLE>
<SCRIPT language=javascript>
<!--

navHover = function() {
var lis = document.getElementById("navmenu").getElementsByTagName("LI");
for (var i=0; i<lis.length; i++) {
lis[i].onmouseover=function() {
this.className+=" iehover";
}
lis[i].onmouseout=function() {
this.className=this.className.replace(new RegExp(" iehover\\b"), "");
}
}
}

function NewWindows(shref){
var xx=(window.screen.width-450)/2;
var yy=(window.screen.height-200)/2;
pp=window.open(shref,"win","menubar=no,location=no,resizable=no,scrollbars=no,status=no,left="+xx+",top="+yy+",Width=450,Height=200");
}
function $(s){return document.getElementById(s);}
//-->
</SCRIPT>

<TABLE 
style="BACKGROUND-IMAGE: url(http://www.cublog.cn/templates/newgreen/images/bg_top.gif); BACKGROUND-REPEAT: no-repeat; BORDER-COLLAPSE: collapse" 
height=143 cellSpacing=0 cellPadding=0 width="100%" align=center bgColor=#187218 
border=0>
  <TBODY>
  <TR>
    <TD width=360></TD>
    <TD align=middle width=500>
      <P style="MARGIN: 5px; LINE-HEIGHT: 150%"><FONT style="FONT-SIZE: 14pt" 
      color=#ffffff><B>
      <P style="MARGIN: 5px; LINE-HEIGHT: 150%"><FONT style="FONT-SIZE: 14px" 
      color=#ffffff><B>u0u0的成长记忆 </B></FONT></P></B></FONT>
      <P></P></TD>
    <TD width=360>
      <META content=Wja_Qag4gp0cU5hZvnMFeCSxIgqnP2AaZ3q8u6HaJM4 
      name=google-site-verification>
      <SCRIPT type=text/javascript><!--
google_ad_client = "pub-1765593760105296";
/* 主页 */
google_ad_slot = "8586998971";
google_ad_width = 728;
google_ad_height = 90;
//-->
</SCRIPT>

      <SCRIPT src="python网页下载类 - Development - u0u0的成长记忆.files/show_ads.js" 
      type=text/javascript>
</SCRIPT>
    </TD></TR>
  <TR>
    <TD colSpan=3>
      <TABLE style="BORDER-COLLAPSE: collapse" borderColor=#111111 cellSpacing=0 
      cellPadding=0 width=980 border=0>
        <TBODY>
        <TR>
          <TD></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE style="BORDER-COLLAPSE: collapse" height=27 cellSpacing=0 cellPadding=0 
width="100%" align=center bgColor=#ffffff 
background="python网页下载类 - Development - u0u0的成长记忆.files/bg_menu.gif" border=0>
  <TBODY>
  <TR>
    <TD align=middle width=30><IMG height=29 alt="" 
      src="python网页下载类 - Development - u0u0的成长记忆.files/img_menu_left.gif" 
      width=26 border=0></TD>
    <TD width=200><A class=list1 href="http://u0u0.cublog.cn/" 
      target=_blank>u0u0.cublog.cn</A> </TD>
    <TD style="COLOR: #2a5200" align=right width=750>
      <UL id=navmenu>
        <LI class=ul0><A class=list1 href="http://control.cublog.cn/" 
        target=_blank>管理博客</A> </LI>
        <LI class=ul0><A class=list1 
        href="http://control.cublog.cn/article_new.php" target=_blank>发表文章</A> 
        </LI>
        <LI class=ul0><A class=list1 
        href="http://blog.chinaunix.net/u/4774/guestbook.html">留言</A> </LI>
        <LI class=ul0><A class=list1 
        href="http://blog.chinaunix.net/u/4774/links.html">收藏夹</A> 
        <UL class=ul1>
          <LI><A href="http://blog.chinaunix.net/u/4774/links_8788.html">・ blog<!-- a8788 --></A><!-- 8788 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/links_3834.html">・ 嵌入式<!-- a3834 --></A><!-- 3834 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/links_1315.html">・ 
          FreeBSD forum<!-- a1315 --></A><!-- 1315 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/links_1314.html">・ linux 
          forum<!-- a1314 --></A><!-- 1314 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/links_1316.html">・ open 
          program<!-- a1316 --></A><!-- 1316 --> </LI></UL></LI>
        <LI class=ul0><A class=list1 
        href="http://blog.chinaunix.net/u/4774/group.html">博客圈</A> </LI>
        <LI class=ul0><A class=list1 
        href="http://blog.chinaunix.net/u/4774/music.html">音乐</A> 
        <UL class=ul1>
          <LI><A href="http://blog.chinaunix.net/u/4774/music_1383.html">・ 
          my_music<!-- a1383 --></A><!-- 1383 --> </LI></UL></LI>
        <LI class=ul0><A class=list1 
        href="http://blog.chinaunix.net/u/4774/photo.html">相册</A> 
        <UL class=ul1>
          <LI><A href="http://blog.chinaunix.net/u/4774/photo_181.html">・ files<!-- a181 --></A><!-- 181 --> </LI></UL></LI>
        <LI class=ul0><A class=list1 
        href="http://blog.chinaunix.net/u/4774/article.html">文章</A> 
        <UL class=ul1>
          <LI><A href="http://blog.chinaunix.net/u/4774/article_131413.html">・ 
          老婆板<!-- a131413 --></A><!-- 131413 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/article_22842.html">・ 
嵌入式<!-- a22842 --></A><!-- 22842 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/article_40543.html">・ 
          Development<!-- a40543 --></A><!-- 40543 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/article_6949.html">・ 
休闲娱乐<!-- a6949 --></A><!-- 6949 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/article_6948.html">・ 
          FreeBSD<!-- a6948 --></A><!-- 6948 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/article_91779.html">・ 贴图<!-- a91779 --></A><!-- 91779 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/article_6947.html">・ 
          Linux<!-- a6947 --></A><!-- 6947 --> 
          <LI><A href="http://blog.chinaunix.net/u/4774/article_37196.html">・ 游戏<!-- a37196 --></A><!-- 37196 --> </LI></UL></LI>
        <LI class=ul0><A class=list1 
        href="http://blog.chinaunix.net/u/4774/index.html">首页</A> </LI></UL></TD>
    <TD width=10></TD></TR>
  <TR>
    <TD colSpan=4>
      <TABLE style="BORDER-COLLAPSE: collapse" borderColor=#111111 cellSpacing=0 
      cellPadding=0 width=980 border=0>
        <TBODY>
        <TR>
          <TD></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<SCRIPT language=javascript>
function $(s){return document.getElementById(s);}
function ShowHideDiv(divid,iImg){
if($(divid).style.display == "none"){
iImg.src="../../templates/newgreen/images/dot2.gif";
$(divid).style.display = "block";
iImg.title="收起";
}else{
iImg.src="../../templates/newgreen/images/dot4.gif";
$(divid).style.display = "none";
iImg.title="展开";
}
}
navHover();
</SCRIPT>

<SCRIPT language=javascript 
src="python网页下载类 - Development - u0u0的成长记忆.files/pv.js"></SCRIPT>

<SCRIPT>
function sendPV(){
    var pvTrack = new PvTrack();
    pvTrack.type = 10; // 频道类别ID
    pvTrack.channel = 22; // 频道ID
   
    pvTrack.pageType = 0;
    pvTrack.track();
}
window.setTimeout("sendPV()", 0);
</SCRIPT>

<SCRIPT language=javascript 
src="D:\tmpdownload\python网页下载类 - Development - u0u0的成长记忆.files\pv(1).js" 
type=text/javascript></SCRIPT>

<TABLE style="BORDER-COLLAPSE: collapse" borderColor=#111111 cellSpacing=0 
cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD height=3></TD></TR></TBODY></TABLE><BR>
<TABLE style="BORDER-COLLAPSE: collapse" borderColor=#111111 cellSpacing=0 
cellPadding=0 width="90%" align=center border=0>
  <TBODY>
  <TR>
    <TD width=18 height=28><IMG alt="" 
      src="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_left_top.gif" 
      border=0></TD>
    <TD 
      background="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_top.gif"><P 
      style="MARGIN: 5px; LINE-HEIGHT: 150%"></P></TD>
    <TD width=18 height=28><IMG alt="" 
      src="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_right_top.gif" 
      border=0></TD></TR>
  <TR>
    <TD width=18 
    background="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_left.gif"></TD>
    <TD align=middle bgColor=#f5fdee><BR><FONT style="FONT-SIZE: 14pt" 
      color=#295200><B>python网页下载类</B></FONT> 
      <TABLE style="BORDER-COLLAPSE: collapse" borderColor=#a5bd6b cellSpacing=1 
      cellPadding=0 width="100%" border=1>
        <TBODY>
        <TR>
          <TD align=middle>
            <TABLE style="BORDER-COLLAPSE: collapse; WORD-WRAP: break-word" 
            cellSpacing=0 cellPadding=0 width="100%" border=0>
              <TBODY>
              <TR>
                <TD align=middle>
                  <TABLE 
                  style="BORDER-COLLAPSE: collapse; WORD-WRAP: break-word" 
                  cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD>
                        <DIV id=art 
                        style="MARGIN: 15px">处理了etag和lastmodified，和gzip。<BR>避免了重复或许，节省带宽。<BR><BR>
                        <TABLE style="BORDER-COLLAPSE: collapse" 
                        borderColor=#999999 cellSpacing=0 cellPadding=0 
                        width="95%" bgColor=#f1f1f1 border=1>
                          <TBODY>
                          <TR>
                            <TD>
                              <P 
                              style="MARGIN: 5px; LINE-HEIGHT: 150%"><CODE><SPAN 
                              style="COLOR: rgb(0,0,0)">#<SPAN 
                              style="COLOR: rgb(0,0,204)">!</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">/</SPAN>usr<SPAN 
                              style="COLOR: rgb(0,0,204)">/</SPAN>bin<SPAN 
                              style="COLOR: rgb(0,0,204)">/</SPAN>env 
                              python<BR><BR><SPAN 
                              style="COLOR: rgb(0,0,255)">import</SPAN> 
                              openanything<BR><BR>USER_HTTP_AGENT <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> <SPAN 
                              style="COLOR: rgb(255,0,255)">'python http 
                              downloader'</SPAN><BR><BR><SPAN 
                              style="COLOR: rgb(0,0,255)">class</SPAN> 
                              http_downloader<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
                              style="COLOR: rgb(0,0,255)">def</SPAN> <SPAN 
                              style="COLOR: rgb(255,0,0)">__init__</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>self<SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN>url<SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">{</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">}</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'url'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> 
                              url<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'etag'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> 
                              None<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'lastmodified'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> 
                              None<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
                              style="COLOR: rgb(0,0,255)">def</SPAN> fetch<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>self<SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              f <SPAN style="COLOR: rgb(0,0,204)">=</SPAN> 
                              openanything<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>openAnything<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'url'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN>self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'etag'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN>self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'lastmodified'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN>USER_HTTP_AGENT<SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'data'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> f<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>read<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">if</SPAN> 
                              hasattr<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>f<SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN> <SPAN 
                              style="COLOR: rgb(255,0,255)">'headers'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              # save ETag<SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,255)">if</SPAN> the server 
                              sent 
                              one<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'etag'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> f<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>headers<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>get<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'ETag'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              # save Last<SPAN 
                              style="COLOR: rgb(0,0,204)">-</SPAN>Modified 
                              header<SPAN style="COLOR: rgb(0,0,204)">,</SPAN> 
                              <SPAN style="COLOR: rgb(0,0,255)">if</SPAN> the 
                              server sent 
                              one<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'lastmodified'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> f<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>headers<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>get<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'Last-Modified'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">if</SPAN> f<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>headers<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>get<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'content-encoding'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> <SPAN 
                              style="COLOR: rgb(255,0,255)">'gzip'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              # data came back gzip<SPAN 
                              style="COLOR: rgb(0,0,204)">-</SPAN>compressed<SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN> decompress 
                              it<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'data'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> gzip<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>GzipFile<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>fileobj<SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN>StringIO<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'data'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>read<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">if</SPAN> 
                              hasattr<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>f<SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN> <SPAN 
                              style="COLOR: rgb(255,0,255)">'url'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'url'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> f<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>url<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              #<SPAN style="COLOR: rgb(0,0,255)">if</SPAN> 
                              f<SPAN style="COLOR: rgb(0,0,204)">.</SPAN>read 
                              success<SPAN style="COLOR: rgb(0,0,204)">,</SPAN>f 
                              has <SPAN style="COLOR: rgb(0,0,255)">not</SPAN> 
                              attr <SPAN style="COLOR: rgb(255,0,255)">'status 
                              '</SPAN><SPAN style="COLOR: rgb(0,0,204)">,</SPAN> 
                              so set default 
                              here<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'status'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> 
                              200<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">if</SPAN> 
                              hasattr<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>f<SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN> <SPAN 
                              style="COLOR: rgb(255,0,255)">'status'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'status'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> f<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>status<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              f<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>close<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
                              style="COLOR: rgb(0,0,255)">def</SPAN> 
                              set_url<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>self<SPAN 
                              style="COLOR: rgb(0,0,204)">,</SPAN>url<SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">if</SPAN> url 
                              <SPAN style="COLOR: rgb(0,0,204)">!</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'url'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'etag'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> 
                              None<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'lastmodified'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> 
                              None<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'url'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN> <SPAN 
                              style="COLOR: rgb(0,0,204)">=</SPAN> 
                              url<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
                              style="COLOR: rgb(0,0,255)">def</SPAN> 
                              debug_print<SPAN 
                              style="COLOR: rgb(0,0,204)">(</SPAN>self<SPAN 
                              style="COLOR: rgb(0,0,204)">)</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">:</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">print</SPAN> 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'url'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">print</SPAN> 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'status'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">print</SPAN> 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'etag'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              <SPAN style="COLOR: rgb(0,0,255)">print</SPAN> 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'lastmodified'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                              #<SPAN style="COLOR: rgb(0,0,255)">print</SPAN> 
                              self<SPAN 
                              style="COLOR: rgb(0,0,204)">.</SPAN>result<SPAN 
                              style="COLOR: rgb(0,0,204)">[</SPAN><SPAN 
                              style="COLOR: rgb(255,0,255)">'data'</SPAN><SPAN 
                              style="COLOR: rgb(0,0,204)">]</SPAN></SPAN></CODE></P></TD></TR></TBODY></TABLE></DIV></TD></TR></TBODY></TABLE>
                  <P style="MARGIN: 5px; LINE-HEIGHT: 150%"></P></TD></TR>
              <TR>
                <TD align=middle height=25><FONT color=#295200>发表于： 2008-09-08 
                  ，修改于： 2008-09-08 16:12，已浏览594次，有评论2条</FONT> <A id=star 
                  title=推荐这篇文章 onclick="NewWindows(this.href);return false;" 
                  href="http://blog.chinaunix.net/u2/star.php?blogid=4774&amp;artid=1170005">推荐</A> 
                  <A id=complaint title=投诉这篇文章 
                  onclick="NewWindows(this.href);return false;" 
                  href="http://blog.chinaunix.net/u2/complaint.php?blogid=4774&amp;artid=1170005">投诉</A> 
                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD>
    <TD width=18 
    background="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_right.gif"></TD></TR>
  <TR>
    <TD width=18 height=28><IMG alt="" 
      src="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_left_bottom.gif" 
      border=0></TD>
    <TD 
    background="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_bottom.gif">
      <P style="MARGIN: 5px; LINE-HEIGHT: 150%"></P></TD>
    <TD width=18 height=28><IMG alt="" 
      src="python网页下载类 - Development - u0u0的成长记忆.files/bg_art_right_bottom.gif" 
      border=0></TD></TR></TBODY></TABLE><BR>
<TABLE style="BORDER-COLLAPSE: collapse" borderColor=#a5bd6b cellSpacing=1 
cellPadding=0 width="90%" align=center border=1>
  <TBODY>
  <TR>
    <TD style="COLOR: #295200" bgColor=#eff7de height=25><B>网友评论</B></TD></TR>
  <TR>
    <TD bgColor=#ffffff height=1></TD></TR>
  <TR>
    <TD align=middle bgColor=#f9f5e7>
      <TABLE 
      style="COLOR: #295200; BORDER-COLLAPSE: collapse; WORD-WRAP: break-word" 
      cellSpacing=0 cellPadding=0 width="100%" align=center border=0>
        <TBODY>
        <TR>
          <TD vAlign=top width=60><B>内容：</B></TD>
          <TD vAlign=top width=580><PRE style="MARGIN: 0px; LINE-HEIGHT: 150%" wrap="break-word">blog系统缩进有问题，调半天。<BR>
<BR>
使用如下<BR>
opener&nbsp;=&nbsp;http_downloader(url)<BR>
opener.fetch()<BR>
opener.debug_print()<BR>
<BR>
</PRE></TD></TR>
        <TR height=25>
          <TD style="FONT-SIZE: 8pt; COLOR: #737373" 
            colSpan=2>u0u0评论于：2008-09-08 16:15:30 （218.88.99.★） </TD></TR>
        <TR>
          <TD colSpan=3 height=15></TD></TR>
        <TR>
          <TD colSpan=3><IMG alt="" 
            src="python网页下载类 - Development - u0u0的成长记忆.files/middle_line.gif" 
            border=0></TD></TR>
        <TR>
          <TD vAlign=top width=60><B>内容：</B></TD>
          <TD vAlign=top width=580><PRE style="MARGIN: 0px; LINE-HEIGHT: 150%" wrap="break-word">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;看晕了....</PRE></TD></TR>
        <TR height=25>
          <TD style="FONT-SIZE: 8pt; COLOR: #737373" 
            colSpan=2>小沈评论于：2008-11-13 23:24:24 （222.219.87.★） </TD></TR>
        <TR>
          <TD colSpan=3 height=15></TD></TR>
        <TR>
          <TD colSpan=3><IMG alt="" 
            src="python网页下载类 - Development - u0u0的成长记忆.files/middle_line.gif" 
            border=0></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR>
<TABLE style="BORDER-COLLAPSE: collapse" borderColor=#a5bd6b cellSpacing=1 
cellPadding=0 width="90%" align=center border=1>
  <TBODY>
  <TR>
    <TD style="COLOR: #295200" bgColor=#eff7de height=25><B>发表评论</B></TD></TR>
  <TR>
    <TD bgColor=#ffffff height=1></TD></TR>
  <TR>
    <TD align=middle bgColor=#f9f5e7><IFRAME name=comment 
      src="python网页下载类 - Development - u0u0的成长记忆.files/CADCLK95.htm" 
      frameBorder=0 width="100%" 
height=160></IFRAME></TD></TR></TBODY></TABLE></BODY></HTML>
