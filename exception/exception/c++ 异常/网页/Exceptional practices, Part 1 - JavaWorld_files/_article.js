NW=window.NW||{};NW.SocialTools=function(){var a=function(c,b,d){window.open(c,b,d)};return{on_click:function(h){n=NW.SocialTools;var c=$(h.target);var f=c.text().toLowerCase();f=$.trim(f);switch(f){case"print":var i="/export/home/httpd/javaworld"+NW.PageInfo.doc_uri;var e=NW.PageInfo.doc_uri;var b="http://www.javaworld.com"+NW.PageInfo.doc_uri;var d="/cgi-bin/mailto/x_java.cgi?pagetosend="+i;d+="&pagename="+e+"&pageurl="+b+"&site=jw_core";a(d,"Print","menubar=yes,scrollbars=yes,resizable=yes,width=800,height=600");break;case"email":var d="/storytools/send_to_friend-form.jsp";d+="?rxid="+NW.PageInfo.rxid;d+="&refpage=jw";d+="&pagetosend=/export/home/httpd/javaworld"+encodeURI(NW.PageInfo.doc_uri);d+="&pagename="+encodeURI(NW.PageInfo.doc_uri);d+="&pageurl="+encodeURI(NW.PageInfo.doc_uri);a(d,"Email","scrollbars=yes,resizable=yes,width=625,height=480");break;case"feedback":contacturl="/askTheExpert.jsp?pagename=http://www.javaworld.com"+NW.PageInfo.doc_uri;contacturl+="&pageurl="+NW.PageInfo.doc_uri;contacturl+="&pubsite=j";a(contacturl,"Feedback","scrollbars=yes,resizable=yes,width=500,height=600");break;case"digg":var g="http://digg.com/submit?phase=2&url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent(document.title);a(g,"Digg","scrollbars=yes,resizable=yes,width=800,height=600");break;case"reddit":var g="http://reddit.com/submit?url=&url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent(document.title);a(g,"Reddit","scrollbars=yes,resizable=yes,width=800,height=600");break;case"slashdot":var g="http://slashdot.org/bookmark.pl?url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent(document.title);a(g,"Slashdot","scrollbars=yes,resizable=yes,width=800,height=600");break;case"stumble":var g="http://www.stumbleupon.com/submit?url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent(document.title);a(g,"Stumble","scrollbars=yes,resizable=yes,width=800,height=600");break;case"del.icio.us":var g="http://del.icio.us/post?v=4&url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent(document.title);a(g,"Delicious","scrollbars=yes,resizable=yes,width=800,height=600");break;case"technorati":var g="http://technorati.com/faves?add="+encodeURIComponent(document.location);a(g,"Technorati","scrollbars=yes,resizable=yes,width=800,height=600");break;case"dzone":var g="http://www.dzone.com/links/add.html?url="+encodeURIComponent("http://www.javaworld.com/"+NW.PageInfo.doc_uri);g+="&title="+encodeURIComponent(document.title);g+="&description="+NW.PageInfo.description;a(g,"DZone","scrollbars=yes,resizable=yes,width=800,height=600");break}},init:function(){var b=parseInt($("div#contentarea div#sectionhome div#a-e_col1 div#story_comments #numcomments").text());if(b>0){$("div#id_storytools_top div.storytools_tools ul#id_storytools_tools_top li#id_storytools_tools_discuss_top a").text("Discuss ("+b+")")}$("div#contentarea div#id_storytools_top ul#id_storytools_social_top").bind("click",this.on_click);$("div#contentarea div#id_storytools_bottom ul#id_storytools_social_bottom").bind("click",this.on_click);$("div#contentarea div#id_storytools_top div ul#id_storytools_tools_top").bind("click",this.on_click);$("div#contentarea div#id_storytools_bottom div ul#id_storytools_tools_bottom").bind("click",this.on_click)}}}();NW.SocialTools.init();NW=window.NW||{};if(typeof(NW.StoryTools)=="undefined"){NW.StoryTools=function(){this.ver=1;this.comments_exist=null;this.login_error_message='<div id="error"><em>Unable to login. <strong>Please check your credentials and try again.</strong></em></div>';this.pageurl=null;this.rxid=null;this.ref_url=null;this.nodeid=null;this.validate_login_form=function(){isvalid=true;if(!$("#jq_username").val()){isvalid=false}if(!$("#jq_password").val()){isvalid=false}return isvalid};this.validate_comment_form=function(){isvalid=true;if(!$("#mg_comments").val()){isvalid=false}if(!$("#recaptcha_response_field").val()){isvalid=false}return isvalid}};NW.StoryTools.prototype.init=function(e,d,b,f,c){var a=this;this.pageurl=e;this.rxid=f||d;this.ref_url=b;this.nodeid=f||null;this.subtopics=c||null;this.comment_form_submitted=0;this.comments_exist=$("#frm_addcomment #jq_comments").val();$("#titlebar_login_a").click(function(){$("#titlebar_loggedout").hide();$("#frm_addcomment").find(":input").attr({disabled:"disabled"});$("#login").slideDown("slow",function(){$("#jq_username").focus()});return false});$("#titlebar_reg_a").click(function(){$("#comments_reg").slideDown("medium");return false});$("#comments_reg_cancel").click(function(){$("#comments_reg").slideUp("medium");return false});Recaptcha.create("6LcD8bwSAAAAAJY2_ih78yM8RE0DpYRwhHpqw6vL","comment_captcha",{theme:"red"});$("#comments_reg_submit").click(function(k){k.preventDefault();var h=$.trim($("#comments_reg_username").val());var g=$.trim($("#comments_reg_email").val());var i=$.trim($("#comments_reg_confirm").val());var l="reg_name="+h+"&reg_email="+g+"&reg_confirm="+i;var j=true;if(j){$.ajax({type:"POST",url:"/includes/community/ajax_create_user.php",data:l,success:function(o){var m=o.split(",");if(m[0]=="false"){$(a.login_error_message).insertAfter($("#login_form_info"));return false}else{if(m[0]=="true"){$("#login").slideDown("medium");$("#addcomments div.user_fields_visible").removeClass("user_fields_visible").addClass("user_fields_hidden");$("#titlebar_loggedout").hide();$("#titlebar_loggedin").css("display","inline").slideDown("medium");$("#comments_info_span").slideUp("medium");$("#comment_warning").hide();$("#addcomments").show();$("#login_name").html(m[1]+". ");$('<span id="comments_user_info"></span>').html("You can now login in with:<br /> user name - "+m[1]+"<br />password - "+m[2]).appendTo("#comments_reg");$("#comments_reg fieldset").slideUp("medium")}else{alert("else: "+m[0])}}}})}else{}return false});$("#comment_form_login").click(function(){$("#titlebar_loggedout").hide();$("#comment_warning").hide();$("#frm_addcomment").find(":input").attr({disabled:"disabled"});$("#login").slideDown("slow",function(){$("#jq_username").focus()});return false});$("#form_login_submit").click(function(){$("#form_login").find(":button").attr({disabled:"disabled"});var g=a.validate_login_form();$("#error").remove();if(g){var h=$("#form_login").serialize();$.ajax({type:"GET",url:"/community/rtn_login08.php",data:h,success:function(j){var i=j.split(",");if(i[0]=="false"){$(a.login_error_message).insertAfter($("#login_form_info"));$("#comment_warning").hide();$("#addcomments").show();$("#form_login").find(":button").removeAttr("disabled");return false}else{if(i[0]=="true"){$("#comment_warning").hide();$("#login").slideUp("medium");$("#titlebar_loggedout").hide();$("#titlebar_loggedin").css("display","inline").slideDown("medium");$("#comments_info_span").slideUp("medium");$("#frm_addcomment").find(":input").removeAttr("disabled");$("#login_name").html(i[1]+". ");$("#addcomments").show()}}}})}else{$(a.login_error_message).insertAfter($("#login_form_info"))}$("#form_login").find(":button").removeAttr("disabled");return false});$("#logout").click(function(){$.post("/includes/community/rtn_logout.php",function(g){if(g=="true"){$("#titlebar_loggedin").hide();$("#titlebar_loggedout").css("display","inline").slideDown("medium");$("#comment_warning").show();$("#addcomments").hide();$("#comments_info_span").fadeIn("fast")}});return false});$("#form_login_cancel").click(function(){$("#login").slideUp("medium");$("#titlebar_loggedin").hide();$("#error").remove();$("#titlebar_loggedout").css("display","inline").slideDown("medium");$("#comment_warning").show();$("#addcomments").hide();$("#frm_addcomment").find(":input").removeAttr("disabled")});$("#frm_addcomments_submit").click(function(){var g=($("#addcomments").css("display")).toLowerCase();if(g=="none"){return}a.comment_form_submitted++;$("#frm_addcomments_submit").find(":button").attr("disable","disable");var h=a.validate_comment_form();if(h&&a.comment_form_submitted<2){var i=$("#frm_addcomment").serialize();i+="&rxid="+a.rxid;i+="&nodeid="+a.nodeid;i+="&page_url="+a.pageurl;i+="&ajax=ajax";i+="&fpass="+$("#jq_password").val();i+="&fname="+$("#jq_username").val();i+="&subtopics="+encodeURIComponent(a.subtopics);$.ajax({type:"POST",url:"/community/guard_nwcontent08.php",data:i,success:function(l){var j=l.split(",");var m=j[0];var k="";if(m=="captcha_error"){alert("Captcha was incorrect. Please try again");return false}else{if(m){k="<p><strong>Thank you for your comment!</strong></p>";if(j[2]=="true"){k+="<p>Your comment will appear here upon refresh.</p>";k+="<p>To view or edit your comment in community ";if(j.length==3){k+='<a href="/community/node/'+j[1]+'">Click Here</a>.</p>'}else{k+='<a href="/community/node/'+j[1]+"/"+j[3]+'">Click Here</a>.</p>'}}else{k+="<p>Anonymous comments subject to moderator approval.</p>";k+="<p>Your comment will appear here upon refresh.</p>"}}else{k="<p><strong>An error has occured.</strong></p>";k+="<p>Please contact ?????</p>"}}if(j.length>3){k+='<input type="button" name="temp_cancel" id="jq_temp_cancel" value="Close" />'}$("#frm_addcomment").hide();$('<div id="addcomment_response"></div>').html(k).prependTo("#addcomments");if(j.length>3){$("#jq_temp_cancel").bind("click",function(){$("#addcomments").slideUp("medium");$("#frm_addcomment").show();$("#addcomment_response").remove()})}$("#mg_subject").val("");$("#mg_comments").val("")}})}else{if(!h){alert("A comment and Recaptcha must be valid to continue.")}}$("#frm_addcomments_submit").find(":button").removeAttr("disabled");a.comment_form_submitted=0;return false});$("#frm_addcomments_cancel").click(function(){if(a.comments_exist=="true"){$("#addcomments").slideUp("slow")}return false});$("a.reply_link").click(function(){$("#addcomments").hide();if($("#addcomment_response").length>0){$("#addcomment_response").remove();$("#mg_subject").val("");$("#mg_comments").val("")}$parent=$(this).parent("p.reply");$("#frm_addcomment").show();$("#addcomments").insertAfter($parent).show("fast");Recaptcha.reload();return false})}}$(document).ready(function(){var a=new NW.StoryTools();a.init(NW.PageInfo.doc_uri,NW.PageInfo.rxid,NW.PageInfo.request_uri,NW.PageInfo.nodeid,NW.PageInfo.SubTopicID)});